@page "/FeedEjercicio/{category?}"
@model MyApp.Namespace.FeedEjercicioModel
@{
}
<script src="https://cdn.tailwindcss.com"></script>

<div class="container mx-auto space-y-8">
  @foreach (var item in Model.Posts)
  {
    <div class="relative border rounded-lg p-4 shadow-lg">
      <!-- flag button top-right -->
      <button
        onclick="reportPost('@item.Id')"
        title="Reportar publicación"
        class="absolute top-2 right-2 bg-white p-2 rounded-full shadow-md z-10 hover:bg-gray-100 focus:outline-none"
      >
        <svg xmlns="http://www.w3.org/2000/svg"
            class="w-5 h-5 text-red-500"
            fill="currentColor"
            viewBox="0 0 16 16">
          <!-- Bootstrap’s solid flag icon -->
          <path d="M14.778 1.32a.5.5 0 0 0-.37-.17H6.5a.5.5 0 0 1 0-1h7.908a.5.5 0 0 1 .457.67l-1.25 4.037 1.25 4.037a.5.5 0 0 1-.457.67H6.5a.5.5 0 0 1 0-1h7.908a.5.5 0 0 0 .37-.67L14.028 5.2l1.15-3.48z"/>
          <path d="M1 1h1v14H1V1z"/>
        </svg>
      </button>

      <!-- user name + verified badge -->
      <div class="flex items-center mb-2">
        <span class="font-medium text-lg">@item.UserName</span>
        @if (item.IsVerified)
        {
          <svg class="w-4 h-4 ml-1 shrink-0" viewBox="0 0 24 24" fill="#2ECC71" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="12"/>
            <path fill="#fff" d="M10.2 14.7l-2-2a1 1 0 011.4-1.4l1.3 1.3 
                                 3.7-3.7a1 1 0 011.4 1.4l-4.4 4.4a1 1 0 01-1.4 
                                 0Z"/>
          </svg>
        }
      </div>

      <h3 class="text-2xl font-bold mb-2">@item.Title</h3>
      <div class="w-full aspect-video overflow-hidden rounded mb-3 bg-gray-100">
        <img src="@item.ImageDataUrl"
             alt="Post image"
             class="w-full h-full object-contain"/>
      </div>
      <p class="mb-1">@item.Description</p>
      <span class="text-sm text-gray-500">@item.Category</span>
    </div>
  }
</div>


@section Scripts {
  <script src="~/js/report.js"></script>
}